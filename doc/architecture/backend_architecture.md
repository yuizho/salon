# Backend Archtecture
## 運用するうえで避けたいこと
- ユーザがいないにもかかわらずお金だけすごくかかること
- プロダクトの要件としてログイン不要で使えるものにしたいが、無限に部屋が作られ続けるみたいな自体は避けたい
- ユーザが急に増えた場合でもある程度スケールするようにしておきたい

## 設計
![backend](./backend.svg)
- サーバレスなアーキテクチャを採用して、使われた分だけ費用がかかり、柔軟にスケールできるようにする
- DoS攻撃とかの対策にAppSyncの前にWAFをかます
- リアルタイムでユーザに情報をpushしていく感じのアプリになるので、書き込みの整合性の担保より、データストアの書き込み時のスケーラビリティが重要になる。そのためRDBは使わずにNoSQLを採用する。
- 責任範囲を明確にしてユーザへのpush処理もシンプルに実装したいので、EventSoursing + CQRS採用する
  - そこまでレイテンシをシビアに管理しなくても大丈夫なので、お手軽さをとってDynamoDB StreamとLambdaで実装する
  - https://zenn.dev/j5ik2o/articles/368e0ab78f105f2a0fae
- ユーザへのpush処理の実装の容易さから、フロントエンドとの通信はGraphQLを採用する (ほんで、サーバレスで行きたいのでAppSyncで)
